<form (submit)="submit($event)" style="max-width:600px;margin:40px auto;font-family:Arial">
  <h2>Create account</h2>

  @if (inviteToken) {
    <div style="margin:12px 0;padding:12px;border:1px solid #d8e6ff;background:#f7faff;border-radius:8px;">
      <div style="font-weight:bold;">Invite registration</div>
      <div style="margin-top:6px;color:#555;">This link is for one new student account only.</div>

      @if (inviteValidationLoading) {
        <div style="margin-top:6px;color:#555;">Verifying invite link...</div>
      }

      @if (!inviteValidationLoading && inviteValidationError) {
        <div style="margin-top:6px;color:#b00020;">{{ inviteValidationError }}</div>
      }

      @if (!inviteValidationLoading && !inviteValidationError) {
        @if (invitePreview?.teacherName) {
          <div style="margin-top:6px;color:#555;"><b>Teacher:</b> {{ invitePreview?.teacherName }}</div>
        }
        @if (invitePreview?.expiresAt) {
          <div style="margin-top:6px;color:#555;"><b>Expires at:</b> {{ invitePreview?.expiresAt }}</div>
        }
      }
    </div>
  }

  <div style="margin:12px 0;">
    <label>Username</label>
    <input [(ngModel)]="username" name="username" style="width:100%; padding:8px;" />
  </div>

  <div style="margin:12px 0;">
    <label>Password</label>
    <input [(ngModel)]="password" name="password" type="password" style="width:100%; padding:8px;" />
    <div style="margin-top:8px; padding:10px; border:1px solid #e2e2e2; border-radius:6px; background:#fafafa;">
      <div style="font-size:13px; font-weight:bold; margin-bottom:6px;">Password requirements</div>
      <div *ngFor="let check of passwordChecks" style="font-size:13px; line-height:1.5;">
        <span [style.color]="check.pass ? '#0b6b0b' : '#b00020'">
          {{ check.pass ? '\u2713' : '\u2717' }}
        </span>
        {{ check.label }}
      </div>
    </div>
  </div>

  <div style="margin:12px 0;">
    <label>Confirm password</label>
    <input [(ngModel)]="confirmPassword" name="confirmPassword" type="password" style="width:100%; padding:8px;" />
  </div>

  <h3 style="margin-top:18px;">Student Info</h3>

  <div style="margin:12px 0;">
    <label>First name</label>
    <input [(ngModel)]="firstName" name="firstName" style="width:100%; padding:8px;" />
  </div>

  <div style="margin:12px 0;">
    <label>Last name</label>
    <input [(ngModel)]="lastName" name="lastName" style="width:100%; padding:8px;" />
  </div>

  <div style="margin:12px 0;">
    <label>Preferred name</label>
    <input [(ngModel)]="preferredName" name="preferredName" style="width:100%; padding:8px;" />
  </div>

  <button type="submit" [disabled]="loading" style="padding:10px 14px; margin-top:12px;">
    {{ loading ? 'Registering...' : 'Create account' }}
  </button>

  @if (error) {
    <p style="color:red; margin-top:12px;">{{ error }}</p>
  }
  @if (success) {
    <p style="color:green; margin-top:12px;">{{ success }}</p>
  }

  <p style="margin-top:16px;">
    Already have an account?
    <a routerLink="/login">Login</a>
  </p>
</form>
